services:
  cardfile:
    build:
      context: ..
      dockerfile: docker/Dockerfile
    container_name: cardfile-py
    ports:
      - "8550:8550"
    volumes:
      # Montar el código fuente para desarrollo en vivo
      - ..:/app
      # Persistir la base de datos
      - ../database.db:/app/database.db
      # Montar configuración
      - ../src/cardfile/config.json:/app/src/cardfile/config.json
      # Montar archivos de idioma (solo lectura)
      - ../lang:/app/lang:ro
    environment:
      - FLET_SERVER_PORT=8550
      - FLET_SERVER_IP=0.0.0.0
      - PYTHONUNBUFFERED=1
    restart: unless-stopped
    networks:
      - cardfile-network

networks:
  cardfile-network:
    driver: bridge

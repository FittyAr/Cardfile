version: '3.8'

services:
  cardfile:
    build:
      context: ..
      dockerfile: docker/Dockerfile
    container_name: cardfile-py
    ports:
      - "8550:8550"
    volumes:
      # Persistir la base de datos
      - ../database.db:/app/database.db
      # Persistir preferencias de idioma
      - ../stored_language.txt:/app/stored_language.txt
      # Montar archivos de idioma (solo lectura)
      - ../lang:/app/lang:ro
      # Montar configuraci√≥n (solo lectura)
      - ../config.json:/app/config.json:ro
    environment:
      - FLET_SERVER_PORT=8550
      - FLET_SERVER_IP=0.0.0.0
      - PYTHONUNBUFFERED=1
    restart: unless-stopped
    networks:
      - cardfile-network

networks:
  cardfile-network:
    driver: bridge
